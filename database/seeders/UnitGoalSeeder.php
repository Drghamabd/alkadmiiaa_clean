<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\UnitGoal;
use App\Models\DepartmentGoal;
use App\Models\Unit;

class UnitGoalSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run(): void
    {
        $departmentGoal = DepartmentGoal::first();

        if (!$departmentGoal) {
            $this->command->info('No DepartmentGoal found. Skipping UnitGoal seeding.');
            return;
        }

        $departmentGoalId = $departmentGoal->id;

        $unitGoalsData = [
            'النظافة العامة' => [
                // الهدف الأصلي المجمع: تنظيف قاعة واحدة يوميًا مع إدامة عميقة للطابقين العلوي والسفلي حسب الخطة الأسبوعية.
                // الهدف القابل للقياس: ضمان تنظيف قاعة واحدة يوميًا (ما يعادل 7 قاعات أسبوعيًا) بنسبة إنجاز 100%، مع تطبيق الإدامة العميقة للطابقين العلوي والسفلي وفقًا للخطة الأسبوعية المعتمدة بنسبة التزام 95%.
                'ضمان تنظيف قاعة واحدة يوميًا (ما يعادل 7 قاعات أسبوعيًا) بنسبة إنجاز 100%، مع تطبيق الإدامة العميقة للطابقين العلوي والسفلي وفقًا للخطة الأسبوعية المعتمدة بنسبة التزام 95%.',

                // الهدف الأصلي المجمع: إدامة يومية لقاعات المبيت بعد مغادرة الزوار، مع التعقيم الكامل باستخدام المعقمات المعتمدة وفق جدول دوري.
                // الهدف القابل للقياس: إدامة وتعقيم جميع قاعات المبيت بنسبة 100% خلال ساعة واحدة من مغادرة الزوار، وتنفيذ التعقيم الكامل بـ 100% من القاعات المتبقية مرتين أسبوعيًا باستخدام المعقمات المعتمدة.
                'إدامة وتعقيم جميع قاعات المبيت بنسبة 100% خلال ساعة واحدة من مغادرة الزوار، وتنفيذ التعقيم الكامل بـ 100% من القاعات المتبقية مرتين أسبوعيًا باستخدام المعقمات المعتمدة.',

                // الهدف الأصلي المجمع: كنس وغسل الساحات العامة ثلاث مرات يوميًا، مع إزالة الأوساخ والمخلفات كل ساعتين.
                // الهدف القابل للقياس: كنس وغسل جميع الساحات العامة 3 مرات يوميًا (8 صباحًا، 1 ظهرًا، 6 مساءً) بنسبة التزام 95%، وإزالة الأوساخ والمخلفات من جميع النقاط المحددة كل ساعتين خلال ساعات العمل (7 صباحًا - 10 مساءً) بنسبة 98%.
                'كنس وغسل جميع الساحات العامة 3 مرات يوميًا (8 صباحًا، 1 ظهرًا، 6 مساءً) بنسبة التزام 95%، وإزالة الأوساخ والمخلفات من جميع النقاط المحددة كل ساعتين خلال ساعات العمل (7 صباحًا - 10 مساءً) بنسبة 98%.',

                // الهدف الأصلي المجمع: رفع الحاويات من جميع النقاط كل 6 ساعات، مع غسلها وتعقيمها في نهاية كل يوم.
                // الهدف القابل للقياس: رفع 100% من الحاويات من جميع النقاط المحددة كل 6 ساعات على مدار 24 ساعة يوميًا، وغسل وتعقيم 100% منها يوميًا بعد عملية التفريغ الأخيرة.
                'رفع 100% من الحاويات من جميع النقاط المحددة كل 6 ساعات على مدار 24 ساعة يوميًا، وغسل وتعقيم 100% منها يوميًا بعد عملية التفريغ الأخيرة.',

                // الهدف الأصلي المجمع: فرش السجاد في القاعات والساحات، والتأكد من نظافته وتعقيمه قبل وبعد الاستخدام.
                // الهدف القابل للقياس: فرش 100% من السجاد في القاعات والساحات المخصصة قبل 30 دقيقة من الفعاليات المجدولة أو عند الحاجة، والتأكد من نظافة وتعقيم 100% من السجاد قبل وبعد كل استخدام أو فعالية.
                'فرش 100% من السجاد في القاعات والساحات المخصصة قبل 30 دقيقة من الفعاليات المجدولة أو عند الحاجة، والتأكد من نظافة وتعقيم 100% من السجاد قبل وبعد كل استخدام أو فعالية.',

                // الهدف الأصلي المجمع: تعبئة الترامز كل 4 ساعات أو حسب الحاجة، مع التأكد من نظافتها وصلاحية المياه داخلها.
                // الهدف القابل للقياس: تعبئة 100% من الترامز بالماء الصالح للشرب كل 4 ساعات أو فورًا عند انخفاض المستوى إلى أقل من 20%، وإجراء فحص يومي لـ 100% من الترامز للتأكد من نظافتها وصلاحية المياه داخلها.
                'تعبئة 100% من الترامز بالماء الصالح للشرب كل 4 ساعات أو فورًا عند انخفاض المستوى إلى أقل من 20%، وإجراء فحص يومي لـ 100% من الترامز للتأكد من نظافتها وصلاحية المياه داخلها.',
            ],

            'المنشآت الصحية' => [
                // الهدف الأصلي المجمع: تنظيف وتعقيم الحمامات كل ساعتين، مع إعادة تعبئة المواد الصحية (مثل الصابون والزاهي) بشكل دوري.
                // الهدف القابل للقياس: تنظيف وتعقيم 100% من الحمامات كل ساعتين خلال ساعات العمل الرسمية (7 صباحًا - 10 مساءً)، وإعادة تعبئة جميع المواد الصحية (مثل الصابون والزاهي وورق التواليت) عند وصولها إلى 25% من سعتها القصوى مع توفر مخزون بنسبة 99%.
                'تنظيف وتعقيم 100% من الحمامات كل ساعتين خلال ساعات العمل الرسمية (7 صباحًا - 10 مساءً)، وإعادة تعبئة جميع المواد الصحية (مثل الصابون والزاهي وورق التواليت) عند وصولها إلى 25% من سعتها القصوى مع توفر مخزون بنسبة 99%.',

                // الهدف الأصلي المجمع: تنفيذ صيانة دورية للسيفونات، المغاسل، والمرايا، مع إصلاح الأعطال خلال وقت قصير من التبليغ.
                // الهدف القابل للقياس: إجراء صيانة وقائية دورية لـ 100% من السيفونات والمغاسل والمرايا في جميع الحمامات مرة واحدة شهريًا، وإصلاح 95% من الأعطال المبلغ عنها خلال 4 ساعات كحد أقصى من وقت الإبلاغ.
                'إجراء صيانة وقائية دورية لـ 100% من السيفونات والمغاسل والمرايا في جميع الحمامات مرة واحدة شهريًا، وإصلاح 95% من الأعطال المبلغ عنها خلال 4 ساعات كحد أقصى من وقت الإبلاغ.',
            ],
        ];

        foreach ($unitGoalsData as $unitName => $goals) {
            $unit = Unit::where('name', $unitName)->first();

            if (!$unit) {
                $this->command->warn("Unit with name '{$unitName}' not found. Skipping goals for this unit.");
                continue;
            }

            foreach ($goals as $goalText) {
                UnitGoal::create([
                    'department_goal_id' => $departmentGoalId,
                    'unit_id' => $unit->id,
                    'unit_name' => $unitName,
                    'goal_text' => $goalText,
                    'target_tasks' => 10, // ✅ يتم الاحتفاظ بالقيمة الافتراضية كما طلبت
                    'date' => now()->toDateString(),
                ]);
            }
        }
    }
}
